(()=>{"use strict";new class{constructor(){this.isScanning=!1,this.scannedProfiles=new Set,this.init()}init(){chrome.runtime.onMessage.addListener((t,e,o)=>("START_SCAN"===t.type?(this.startScan(),o({success:!0})):"STOP_SCAN"===t.type&&(this.stopScan(),o({success:!0})),!0)),this.injectScanButton()}injectScanButton(){setTimeout(()=>{if(document.querySelector(".scaffold-layout__main")&&!document.getElementById("linkedin-scanner-btn")){const t=document.createElement("button");t.id="linkedin-scanner-btn",t.textContent="Scan 2nd Connections",t.style.cssText="\n          position: fixed;\n          bottom: 20px;\n          right: 20px;\n          z-index: 9999;\n          background: #0a66c2;\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 24px;\n          font-weight: 600;\n          cursor: pointer;\n          box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n          font-size: 14px;\n        ",t.addEventListener("click",()=>{this.isScanning?this.stopScan():this.startScan()}),document.body.appendChild(t)}},2e3)}async startScan(){this.isScanning=!0,chrome.runtime.sendMessage({type:"SCAN_START"});const t=await this.promptForTargetCount();if(null===t)return void this.stopScan();this.updateButtonState(`Scanning 0/${t}...`,"#666");const e=window.location.href;if(e.includes("/search/results/people/"))await this.scanSearchResultsWithPagination(t);else{if(!e.includes("/mynetwork/"))return alert("Please navigate to LinkedIn Search (People) or My Network page to scan 2nd degree connections."),void this.stopScan();await this.scanMyNetwork()}this.stopScan()}async promptForTargetCount(){const t=document.createElement("div");t.id="linkedin-scanner-dialog",t.style.cssText="\n      position: fixed;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n      background: white;\n      padding: 30px;\n      border-radius: 12px;\n      box-shadow: 0 8px 32px rgba(0,0,0,0.3);\n      z-index: 10001;\n      min-width: 400px;\n      font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n    ",t.innerHTML='\n      <h2 style="margin: 0 0 20px 0; font-size: 20px; color: #000;">How many prospects to scan?</h2>\n      <p style="margin: 0 0 20px 0; color: #666; font-size: 14px;">\n        LinkedIn shows ~10 prospects per page. The scanner will automatically navigate through pages.\n      </p>\n      <div style="margin-bottom: 20px;">\n        <input\n          type="number"\n          id="target-count-input"\n          min="10"\n          max="1000"\n          value="50"\n          style="\n            width: 100%;\n            padding: 12px;\n            font-size: 16px;\n            border: 2px solid #ddd;\n            border-radius: 6px;\n            box-sizing: border-box;\n          "\n          placeholder="Enter number (10-1000)"\n        />\n      </div>\n      <div style="display: flex; gap: 10px;">\n        <button\n          id="scan-confirm-btn"\n          style="\n            flex: 1;\n            background: #0a66c2;\n            color: white;\n            border: none;\n            padding: 12px;\n            border-radius: 6px;\n            font-size: 16px;\n            font-weight: 600;\n            cursor: pointer;\n          "\n        >\n          Start Scan\n        </button>\n        <button\n          id="scan-cancel-btn"\n          style="\n            flex: 1;\n            background: #fff;\n            color: #666;\n            border: 2px solid #ddd;\n            padding: 12px;\n            border-radius: 6px;\n            font-size: 16px;\n            font-weight: 600;\n            cursor: pointer;\n          "\n        >\n          Cancel\n        </button>\n      </div>\n    ';const e=document.createElement("div");return e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.5);\n      z-index: 10000;\n    ",document.body.appendChild(e),document.body.appendChild(t),new Promise(o=>{const n=document.getElementById("target-count-input"),s=document.getElementById("scan-confirm-btn"),i=document.getElementById("scan-cancel-btn"),a=()=>{e.remove(),t.remove()};s?.addEventListener("click",()=>{const t=parseInt(n.value);t>=10&&t<=1e3?(a(),o(t)):alert("Please enter a number between 10 and 1000")}),i?.addEventListener("click",()=>{a(),o(null)}),e.addEventListener("click",()=>{a(),o(null)}),n?.addEventListener("keypress",t=>{"Enter"===t.key&&s?.click()}),n?.focus(),n?.select()})}stopScan(){this.isScanning=!1,this.updateButtonState("Scan 2nd Connections","#0a66c2"),chrome.runtime.sendMessage({type:"SCAN_COMPLETE"})}updateButtonState(t,e){const o=document.getElementById("linkedin-scanner-btn");o&&(o.textContent=t,o.style.background=e)}async scanSearchResultsWithPagination(t){console.log(`=== Starting Multi-Page Scan (Target: ${t} prospects) ===`);let e=[],o=1;const n=Math.ceil(t/10)+2;for(;e.length<t&&o<=n;){console.log(`\n--- Page ${o} (${e.length}/${t} prospects collected) ---`),this.updateButtonState(`Scanning ${e.length}/${t}...`,"#666");const n=(await this.scanCurrentPage()).filter(t=>!e.some(e=>e.id===t.id));if(e.push(...n),console.log(`âœ“ Added ${n.length} new prospects (Total: ${e.length}/${t})`),n.length>0&&chrome.runtime.sendMessage({type:"SAVE_PROSPECTS",prospects:n}),e.length>=t){console.log(`ðŸŽ‰ Target reached! Collected ${e.length} prospects`),this.showNotification(`âœ“ Successfully scanned ${e.length} prospects!`);break}if(!await this.goToNextPage()){console.log("No more pages available"),this.showNotification(`Reached end of results. Collected ${e.length} prospects.`);break}o++,await this.sleep(3e3)}console.log(`=== Scan Complete: ${e.length} prospects collected ===`)}async goToNextPage(){console.log("Looking for next page button...");const t=['button[aria-label="Next"]','button[aria-label="View next page"]',".artdeco-pagination__button--next","button.artdeco-pagination__button--next",'[data-test-pagination-page-btn="next"]','button[type="button"][aria-label*="ext"]'];for(const e of t){const t=document.querySelectorAll(e);console.log(`Selector "${e}": found ${t.length} buttons`);for(const o of Array.from(t)){const t=o;if(!t.disabled&&null!==t.offsetParent)return console.log(`âœ“ Found working next button with selector: ${e}`),t.click(),!0}}console.log("Strategy 1 failed, trying Strategy 2: Find pagination by structure");const e=document.querySelectorAll('[class*="pagination"], [class*="artdeco-pagination"]');console.log(`Found ${e.length} pagination containers`);for(const t of Array.from(e)){const e=t.querySelectorAll("button");console.log(`Container has ${e.length} buttons`);for(const t of Array.from(e)){const e=t.textContent?.trim().toLowerCase()||"",o=t.getAttribute("aria-label")?.toLowerCase()||"";if((e.includes("next")||o.includes("next"))&&!t.disabled&&null!==t.offsetParent)return console.log(`âœ“ Found next button by text/aria: "${e||o}"`),t.click(),!0}}console.log("Strategy 2 failed, trying Strategy 3: Find next page number");const o=Array.from(document.querySelectorAll("button"));let n=1;for(const t of o)if("true"===t.getAttribute("aria-current")||t.classList.contains("selected")||t.classList.contains("active")){const e=t.textContent?.trim(),o=parseInt(e||"");if(!isNaN(o)){n=o,console.log(`Current page is: ${n}`);break}}const s=n+1;for(const t of o){const e=t.textContent?.trim();if(e===String(s)&&!t.disabled&&null!==t.offsetParent)return console.log(`âœ“ Found next page button by number: ${s}`),t.click(),!0}console.log("Strategy 3 failed, trying Strategy 4: Any pagination links");const i=Array.from(document.querySelectorAll("a, button"));for(const t of i){const e=t.href||"",o=t.getAttribute("onclick")||"";if((e.includes("page=")||o.includes("page"))&&!t.classList.contains("disabled")&&null!==t.offsetParent){const s=t.textContent?.trim().toLowerCase()||"",i=t.getAttribute("aria-label")?.toLowerCase()||"";if(s.includes("next")||i.includes("next")||e.includes(`page=${n+1}`))return console.log(`âœ“ Found next page link: ${e||o}`),t.click(),!0}}console.log("Strategy 4 failed, trying Strategy 5: Direct URL manipulation");const a=new URL(window.location.href),l=a.searchParams,r=parseInt(l.get("page")||"1");console.log(`Current URL page parameter: ${r}`),l.set("page",String(r+1));const c=a.toString();if(c!==window.location.href)return console.log(`âœ“ Navigating to next page via URL: ${c}`),window.location.href=c,!0;console.log("âŒ All strategies failed - no pagination method worked"),console.log("Current URL:",window.location.href),console.log("Pagination HTML:",document.querySelector('[class*="pagination"]')?.outerHTML.substring(0,500)||"No pagination found");const d=Array.from(document.querySelectorAll("button")).slice(0,20);return console.log("Sample buttons on page:",d.map(t=>({text:t.textContent?.trim().substring(0,30),ariaLabel:t.getAttribute("aria-label"),disabled:t.disabled,classes:t.className}))),!1}async scanCurrentPage(){console.log("Scanning current page..."),await this.scrollAndWait();let t=[];const e=document.querySelectorAll('li, div[data-occludable-job-id], div[class*="search-result"]');console.log(`Found ${e.length} potential list items to scan`);for(const o of Array.from(e)){const e=o.querySelector('a[href*="/in/"]');e&&e.getAttribute("href")?.includes("/in/")&&(o.textContent||"").length>20&&t.push(o)}if(0===t.length){console.log("Strategy 1 failed, trying Strategy 2: Direct link search");const e=document.querySelectorAll('a[href*="/in/"]');console.log(`Found ${e.length} profile links`);const o=new Set,n=new Set;for(const s of Array.from(e)){const e=s.href,i=this.extractProfileId(e);if(n.has(i))continue;let a=s.parentElement,l=0;for(;a&&l<10;){const e=a.getBoundingClientRect(),s=a.textContent?.length||0,r=s>80&&s<2e3,c=e.height>80&&e.height<600;if(r&&c&&!o.has(a)&&a.querySelectorAll('a[href*="/in/"]').length<=3){o.add(a),n.add(i),t.push(a);break}a=a.parentElement,l++}}}if(console.log(`âœ“ Found ${t.length} profile cards using structural analysis`),0===t.length)return console.error("âŒ ERROR: No profile cards found with any strategy"),console.log("Current URL:",window.location.href),console.log("Sample of all links:",Array.from(document.querySelectorAll("a")).slice(0,10).map(t=>t.href)),this.showNotification("No profile cards found. LinkedIn may have changed their layout."),[];const o=[];let n=0,s=0;for(const e of Array.from(t))try{const t=this.extractProspectFromSearchCard(e);t?t.id&&!this.scannedProfiles.has(t.id)?(o.push(t),this.scannedProfiles.add(t.id),console.log(`âœ“ Extracted: ${t.name} (${t.headline})`)):(s++,console.log("âŠ˜ Filtered: Already scanned or missing ID")):(s++,console.log("âŠ˜ Filtered: Not a 2nd degree connection or extraction failed"))}catch(t){n++,console.error("âŒ Error extracting prospect:",t)}return console.log("=== Page Scan Summary ==="),console.log(`Total cards found: ${t.length}`),console.log(`Successfully extracted: ${o.length}`),console.log(`Filtered out: ${s}`),console.log(`Extraction errors: ${n}`),o}async scanMyNetwork(){console.log("=== Starting My Network Scan ==="),await this.scrollAndWait();const t=[".discover-entity-type-card",".mn-connection-card",'[data-control-name="people_connect"]',".artdeco-list__item",".discover-person-card"];let e=null,o="";for(const n of t){const t=document.querySelectorAll(n);if(t.length>0){e=t,o=n,console.log(`âœ“ Found ${t.length} network cards using selector: "${n}"`);break}console.log(`âœ— No cards found with selector: "${n}"`)}if(!e||0===e.length)return console.error("âŒ ERROR: No network cards found with any selector"),console.log("Current URL:",window.location.href),console.log("Page HTML sample:",document.body.innerHTML.substring(0,500)),void this.showNotification("No network cards found. Please check console for details.");const n=[];let s=0,i=0;for(const t of Array.from(e))try{const e=this.extractProspectFromNetworkCard(t);e?e.id&&!this.scannedProfiles.has(e.id)?(n.push(e),this.scannedProfiles.add(e.id),console.log(`âœ“ Extracted: ${e.name} (${e.headline})`)):(i++,console.log("âŠ˜ Filtered: Already scanned or missing ID")):(i++,console.log("âŠ˜ Filtered: Extraction failed"))}catch(t){s++,console.error("âŒ Error extracting prospect:",t)}console.log("=== Scan Summary ==="),console.log(`Total cards found: ${e.length}`),console.log(`Successfully extracted: ${n.length}`),console.log(`Filtered out: ${i}`),console.log(`Extraction errors: ${s}`),n.length>0?(chrome.runtime.sendMessage({type:"SAVE_PROSPECTS",prospects:n}),this.showNotification(`Found ${n.length} new prospects`)):this.showNotification("No new prospects found. Check console (F12) for details.")}extractProspectFromSearchCard(t){try{const e=t.querySelector('a[href*="/in/"]');if(!e)return console.log("âš ï¸ No profile link found in card"),null;const o=e.href.split("?")[0],n=this.extractProfileId(o);if(!n||n===o)return console.log("âš ï¸ Invalid profile ID extracted from:",o),null;let s="Unknown";const i=e.closest("div, li");if(i){const t=i.querySelectorAll('span[aria-hidden="true"]');for(const e of Array.from(t)){const t=e.textContent?.trim()||"";if(t.length>=5&&t.length<=50&&t.includes(" ")){s=t;break}}if("Unknown"===s){const t=e.textContent?.trim();t&&t.length>=5&&t.length<=50&&(s=t)}}let a=(t.textContent||"").replace(/\s+/g," ").replace(/\s*â€¢\s*/g," â€¢ ").trim();console.log(`Card text for ${s}: "${a.substring(0,200)}"`);let l="";const r=[new RegExp(`${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}.*?2nd\\s*(.+?)(?:San Francisco|New York|London|Los Angeles|Seattle|Austin|Boston|Chicago|United States|United Kingdom|Canada|India|Germany|$)`,"i"),new RegExp("2nd\\s*(.+?)(?:San Francisco|New York|London|Los Angeles|Seattle|Austin|Boston|Chicago|United States|United Kingdom|Canada|India|Germany|,|$)","i")];for(const t of r){const e=a.match(t);if(e&&e[1]){if(l=e[1].trim(),l=l.replace(/\s*â€¢\s*$/,"").replace(/^\s*[-:â€¢]\s*/,"").trim(),l.length>5&&l.length<200)break;l=""}}let c="";const d=[/(?:San Francisco Bay Area|San Francisco|New York|Los Angeles|Seattle|Austin|Boston|Chicago|London|Toronto|Vancouver|Bangalore|Mumbai|Berlin|Paris|Sydney)(?:[,\s]+[A-Za-z\s]+)?/i,/([A-Z][a-z]+(?:\s+[A-Z][a-z]+)?),\s*([A-Z]{2}|[A-Za-z\s]+)/,/(United States|United Kingdom|Canada|India|Germany|France|Australia|Singapore)/i];for(const t of d){const e=a.match(t);if(e){c=e[0].trim();break}}let u=0;const g=a.match(/(\d+)\s+mutual\s+connection/i);g&&(u=parseInt(g[1]));const h=a.includes("2nd")?"2nd":"";return"2nd"===h||u>0||""===h?(console.log(`âœ“ Extracted: ${s} | ${l||"No headline"} | ${c||"No location"} | ${u} mutual`),{id:n,name:s,headline:l,profileUrl:o,location:c,mutualConnections:u,scannedAt:Date.now(),status:"new"}):(console.log(`âŠ˜ Skipping ${s}: Not 2nd degree`),null)}catch(t){return console.error("âŒ Error extracting from search card:",t),null}}extractProspectFromNetworkCard(t){try{const e=t.querySelector('a[href*="/in/"]');if(!e)return console.log("âš ï¸ No profile link found in network card"),null;const o=e.href.split("?")[0],n=this.extractProfileId(o);if(!n||n===o)return console.log("âš ï¸ Invalid profile ID extracted from:",o),null;let s="Unknown";const i=e.closest("div, li");if(i){const t=i.querySelectorAll('span[aria-hidden="true"]');for(const e of Array.from(t)){const t=e.textContent?.trim()||"";if(t.length>=5&&t.length<=50&&t.includes(" ")){s=t;break}}if("Unknown"===s){const t=e.textContent?.trim();t&&t.length>=5&&t.length<=50&&(s=t)}}const a=(t.textContent||"").split("\n").map(t=>t.trim()).filter(t=>t.length>0);let l="";const r=a.findIndex(t=>t.includes(s));if(r>=0&&r<a.length-1)for(let t=r+1;t<Math.min(r+4,a.length);t++){const e=a[t];if(e.length>10&&e.length<200&&!e.includes("mutual connection")&&!e.includes("Connect")){l=e;break}}let c=0;for(const t of a)if(t.includes("mutual connection")){const e=t.match(/(\d+)/);if(e){c=parseInt(e[1]);break}}return console.log(`âœ“ Extracted network prospect: ${s} | ${l||"No headline"} | ${c} mutual`),{id:n,name:s,headline:l,profileUrl:o,mutualConnections:c,scannedAt:Date.now(),status:"new"}}catch(t){return console.error("âŒ Error extracting from network card:",t),null}}extractProfileId(t){const e=t.match(/\/in\/([^/]+)/);return e?e[1]:t}async scrollAndWait(){console.log("Starting scroll to load more results...");let t=document.body.scrollHeight,e=0;for(let o=0;o<10;o++){window.scrollTo(0,document.body.scrollHeight),console.log(`Scroll ${o+1}/10`),await this.sleep(2e3);const n=document.body.scrollHeight;if(n===t){if(e++,console.log(`No new content loaded (${e}/3)`),e>=3){console.log("Reached end of results");break}}else e=0,t=n}window.scrollTo(0,0),await this.sleep(1e3),console.log("Scrolling complete")}sleep(t){return new Promise(e=>setTimeout(e,t))}showNotification(t){const e=document.createElement("div");e.textContent=t,e.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: #0a66c2;\n      color: white;\n      padding: 16px 24px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n      font-size: 14px;\n      font-weight: 500;\n    ",document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}},new class{constructor(){this.maxRetries=5,this.retryDelay=1500,this.init()}async init(){window.location.href.includes("/in/")&&(await this.sleep(1e3),await this.closePopups(),(await chrome.storage.local.get("auto_click_message")).auto_click_message&&(console.log("Auto-click enabled, waiting for page to fully load..."),await this.waitForPageLoad(),await this.closePopups(),await this.clickMessageButtonWithRetry()))}async closePopups(){console.log("Checking for popups to close...");const t=['[role="dialog"]',".artdeco-modal",'[aria-modal="true"]',".msg-overlay-bubble-header__premium-upsell",".premium-upsell-modal",'[data-test-modal*="premium"]',".contextual-sign-in-modal"];let e=!1;for(const o of t){const t=document.querySelectorAll(o);for(const o of Array.from(t)){const t=o.getBoundingClientRect();if(0===t.width||0===t.height)continue;const n=window.getComputedStyle(o);if("none"===n.display||"hidden"===n.visibility)continue;const s=o.textContent?.toLowerCase()||"";if(!(s.includes("premium")||s.includes("upgrade")||s.includes("try for free")||s.includes("unlock")))continue;console.log("Found premium popup, looking for close button...");const i=this.findCloseButton(o);i?(console.log("âœ“ Found close button, clicking..."),i.click(),e=!0,await this.sleep(500)):console.log("âš ï¸ Popup found but no close button detected")}}e?(console.log("âœ“ Closed popup(s), waiting for UI to settle..."),await this.sleep(800)):console.log("No popups detected")}findCloseButton(t){const e=['button[aria-label*="Dismiss" i]','button[aria-label*="Close" i]',"button[data-test-modal-close-btn]",".artdeco-modal__dismiss",'button[type="button"] svg[data-test-icon="close-small"]',"button.artdeco-button--circle svg",'button:has-text("No thanks")','button:has-text("Maybe later")','button:has-text("Not now")'];for(const o of e)try{const e=t.querySelector(o);if(e&&this.isButtonClickable(e))return e}catch(t){continue}const o=t.querySelectorAll("button");for(const t of Array.from(o)){const e=t.textContent?.toLowerCase().trim()||"",o=t.getAttribute("aria-label")?.toLowerCase()||"";if(("no thanks"===e||"not now"===e||"maybe later"===e||"dismiss"===e||o.includes("dismiss")||o.includes("close"))&&this.isButtonClickable(t))return t;const n=t.querySelector("svg");if(n){const e=n.getAttribute("aria-label")||n.querySelector("title")?.textContent||"";if((e.toLowerCase().includes("close")||e.toLowerCase().includes("dismiss"))&&this.isButtonClickable(t))return t}}return null}async waitForPageLoad(){"complete"!==document.readyState&&(await new Promise(t=>{window.addEventListener("load",t,{once:!0})}),console.log("âœ“ Page load event fired"));const t=Date.now();for(;Date.now()-t<1e4;){if(document.querySelector('.scaffold-layout__main, [data-view-name="profile-view"], .profile-content')){console.log("âœ“ Profile content detected");break}await this.sleep(500)}await this.sleep(2e3),console.log("âœ“ Page should be ready now")}async clickMessageButtonWithRetry(){for(let t=1;t<=this.maxRetries;t++){console.log(`Auto-click attempt ${t}/${this.maxRetries}...`);const e=await this.findMessageButton();if(e){if(!this.isButtonClickable(e)){if(console.log("âš ï¸ Button found but hidden via CSS - checking if it's in a dropdown..."),await this.clickMoreButton()){console.log('âœ“ Clicked "More" button, waiting for dropdown...'),await this.sleep(800);const t=await this.findMessageButton();if(t&&this.isButtonClickable(t))return void await this.clickButton(t)}console.log("âš ï¸ Button still not clickable, waiting..."),await this.sleep(this.retryDelay);continue}return void await this.clickButton(e)}t<this.maxRetries&&(console.log(`âš ï¸ Message button not found, waiting ${this.retryDelay}ms before retry...`),await this.sleep(this.retryDelay))}console.log("âŒ Could not find or click Message button after all retries"),this.showNotification("âš ï¸ Could not auto-click Message button. Click it manually.","#f5a623")}async clickButton(t){await this.sleep(300),console.log("âœ“ Clicking Message button...");try{t.scrollIntoView({behavior:"instant",block:"center"}),await this.sleep(200),t.click();const e=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});t.dispatchEvent(e),console.log("âœ“ Message button clicked successfully!"),this.showNotification("âœ“ Message button clicked! Type your message and send.","#057642")}catch(t){throw console.error("âŒ Error clicking button:",t),t}}async clickMoreButton(){console.log('Looking for "More" dropdown button...');const t=['button[aria-label*="More actions"]','button[aria-label*="more actions" i]','button[aria-label*="More"]','button[aria-haspopup="true"]',"button.artdeco-dropdown__trigger",'button[data-control-name*="overflow"]','.pvs-profile-actions button[aria-label*="actions" i]'];for(const e of t)try{const t=document.querySelectorAll(e);for(const e of Array.from(t)){const t=e.getAttribute("aria-label")?.toLowerCase()||"",o=e.textContent?.trim().toLowerCase()||"";if(t.includes("more")||t.includes("actions")||"more"===o){const n=e;if(this.isButtonClickable(n))return console.log(`âœ“ Found "More" button: ${t||o}`),n.scrollIntoView({behavior:"instant",block:"center"}),await this.sleep(200),n.click(),!0}}}catch(t){continue}const e=Array.from(document.querySelectorAll("button"));for(const t of e){const e=t.textContent?.trim()||"",o=t.getAttribute("aria-label")?.toLowerCase()||"";if(("..."===e||"â€¢â€¢â€¢"===e||"more"===e.toLowerCase()||o.includes("more actions"))&&this.isButtonClickable(t))return console.log('âœ“ Found "More" button (fallback method)'),t.scrollIntoView({behavior:"instant",block:"center"}),await this.sleep(200),t.click(),!0}return console.log('âŒ No "More" button found'),!1}async findMessageButton(){console.log("Searching for Message button...");const t=["button.message-anywhere-button",'button[aria-label*="Message"][aria-label*="'+this.getProfileName()+'"]','a[aria-label*="Message"][aria-label*="'+this.getProfileName()+'"]','button[aria-label^="Message"]','a[aria-label^="Message"]','button.pvs-profile-actions__action[aria-label*="message" i]',".pvs-profile-actions button",".message-anywhere-button",'button[data-control-name*="message"]','button[aria-label*="message" i]','a[aria-label*="message" i]'],e=[];for(const o of t)try{const t=document.querySelectorAll(o);for(const o of Array.from(t)){const t=o.textContent?.trim().toLowerCase()||"",n=o.getAttribute("aria-label")?.toLowerCase()||"";!t.includes("message")&&!n.includes("message")||n.includes("send a message to linkedin")||n.includes("premium")||e.push(o)}}catch(t){continue}if(e.length>0){console.log(`Found ${e.length} candidate Message button(s)`);for(const t of e)if(this.isButtonClickable(t)){const e=t.textContent?.trim().toLowerCase()||"",o=t.getAttribute("aria-label")?.toLowerCase()||"";return console.log("âœ“ Found VISIBLE Message button"),console.log(`  Text: "${e}", Aria-label: "${o}"`),t}const t=e[0],o=t.textContent?.trim().toLowerCase()||"",n=t.getAttribute("aria-label")?.toLowerCase()||"";return console.log("âœ“ Found Message button (hidden, may be in dropdown)"),console.log(`  Text: "${o}", Aria-label: "${n}"`),t}console.log("Trying fallback method: scanning all buttons...");const o=Array.from(document.querySelectorAll("button, a"));console.log(`Found ${o.length} total buttons/links on page`);for(const t of o){const e=t.textContent?.trim().toLowerCase()||"",o=t.getAttribute("aria-label")?.toLowerCase()||"",n=t.getAttribute("data-control-name")?.toLowerCase()||"";if(("message"===e||o.includes("message")&&!o.includes("send a message to linkedin")&&!o.includes("premium"))&&this.isButtonClickable(t))return console.log("âœ“ Found VISIBLE Message button using fallback method"),console.log(`  Text: "${e}", Aria-label: "${o}", Control: "${n}"`),t}console.log("âŒ No visible Message button found");const n=o.slice(0,10).map(t=>({text:t.textContent?.trim().substring(0,30),aria:t.getAttribute("aria-label")?.substring(0,50),tag:t.tagName}));return console.log("Sample of buttons found:",n),null}getProfileName(){const t=document.querySelector('h1.text-heading-xlarge, h1[class*="heading"]');return t?.textContent?.trim()||""}isButtonClickable(t){const e=t.getBoundingClientRect();if(0===e.width||0===e.height)return console.log("Button has no dimensions"),!1;if(t.hasAttribute("disabled")||"true"===t.getAttribute("aria-disabled"))return console.log("Button is disabled"),!1;const o=window.getComputedStyle(t);return"none"!==o.display&&"hidden"!==o.visibility&&"0"!==o.opacity||(console.log("Button is hidden via CSS"),!1)}sleep(t){return new Promise(e=>setTimeout(e,t))}showNotification(t,e="#057642"){const o=document.createElement("div");o.textContent=t,o.style.cssText=`\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: ${e};\n      color: white;\n      padding: 16px 24px;\n      border-radius: 8px;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n      z-index: 10000;\n      font-size: 14px;\n      font-weight: 500;\n      max-width: 300px;\n    `,document.body.appendChild(o),setTimeout(()=>{o.remove()},5e3)}}})();